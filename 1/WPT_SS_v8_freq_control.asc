Version 4
SHEET 1 2412 824
WIRE -560 -864 -704 -864
WIRE -704 -832 -704 -864
WIRE -560 -768 -560 -864
WIRE -704 -720 -704 -752
WIRE -1136 -656 -1216 -656
WIRE -976 -656 -1056 -656
WIRE -864 -656 -976 -656
WIRE -720 -656 -864 -656
WIRE -560 -656 -560 -704
WIRE -560 -656 -640 -656
WIRE -448 -656 -560 -656
WIRE -976 -640 -976 -656
WIRE -1216 -608 -1216 -656
WIRE -560 -608 -560 -656
WIRE 352 -608 240 -608
WIRE 912 -608 832 -608
WIRE 1072 -608 992 -608
WIRE -864 -592 -864 -656
WIRE 240 -576 240 -608
WIRE 560 -576 496 -576
WIRE -144 -560 -144 -592
WIRE 832 -544 832 -608
WIRE -976 -528 -976 -560
WIRE -560 -480 -560 -544
WIRE -1216 -464 -1216 -528
WIRE -864 -464 -864 -528
WIRE 240 -448 240 -496
WIRE -144 -432 -144 -480
WIRE 352 -416 352 -512
WIRE 832 -416 832 -464
WIRE -976 -400 -976 -464
WIRE -560 -352 -560 -400
WIRE -704 -208 -752 -208
WIRE -592 -208 -640 -208
WIRE 352 -144 304 -144
WIRE 464 -144 432 -144
WIRE -1600 -112 -1680 -112
WIRE -1472 -112 -1536 -112
WIRE -1376 -112 -1472 -112
WIRE -1232 -112 -1296 -112
WIRE -752 -96 -752 -208
WIRE -752 -96 -848 -96
WIRE -720 -96 -752 -96
WIRE -592 -96 -592 -208
WIRE -592 -96 -640 -96
WIRE -496 -96 -592 -96
WIRE -336 -96 -416 -96
WIRE 1248 -96 1120 -96
WIRE 1376 -96 1248 -96
WIRE 1424 -96 1376 -96
WIRE 1488 -96 1424 -96
WIRE 304 -80 304 -144
WIRE 464 -80 464 -144
WIRE -848 -64 -848 -96
WIRE -592 -64 -592 -96
WIRE -1680 -48 -1680 -112
WIRE -1472 -48 -1472 -112
WIRE 1120 -48 1120 -96
WIRE 1248 -48 1248 -96
WIRE 688 -32 640 -32
WIRE 816 -32 752 -32
WIRE 960 -32 896 -32
WIRE 992 -32 960 -32
WIRE 1488 16 1488 -96
WIRE -592 32 -592 0
WIRE 640 32 640 -32
WIRE 1376 32 1376 -96
WIRE -336 48 -336 -96
WIRE -288 48 -336 48
WIRE -96 48 -192 48
WIRE 464 48 464 0
WIRE 992 48 992 -32
WIRE 1120 48 1120 16
WIRE 1120 48 992 48
WIRE -1168 64 -1168 16
WIRE -848 64 -848 16
WIRE -1680 80 -1680 32
WIRE 1248 80 1248 16
WIRE 1248 80 992 80
WIRE -288 96 -336 96
WIRE 464 96 464 48
WIRE -1472 112 -1472 32
WIRE 1120 112 1120 48
WIRE 1248 112 1248 80
WIRE -704 128 -752 128
WIRE -592 128 -640 128
WIRE -288 160 -288 128
WIRE 304 176 304 0
WIRE 464 176 464 160
WIRE 464 176 304 176
WIRE 640 176 640 112
WIRE 944 176 640 176
WIRE 992 176 992 80
WIRE 992 176 944 176
WIRE -1168 224 -1168 144
WIRE 1120 224 1120 176
WIRE 1248 224 1248 176
WIRE 1248 224 1120 224
WIRE 1376 224 1376 96
WIRE 1376 224 1248 224
WIRE 1488 224 1488 96
WIRE 1488 224 1376 224
WIRE -752 240 -752 128
WIRE -752 240 -848 240
WIRE -720 240 -752 240
WIRE -592 240 -592 128
WIRE -592 240 -640 240
WIRE -496 240 -592 240
WIRE -336 240 -336 96
WIRE -336 240 -416 240
WIRE 304 240 304 176
WIRE -848 256 -848 240
WIRE -592 272 -592 240
WIRE 1120 288 1120 224
WIRE -592 368 -592 336
WIRE -848 384 -848 336
WIRE 1488 384 1488 368
WIRE 1488 480 1488 464
FLAG -1216 -464 0
FLAG 1072 -608 cont
FLAG 304 -144 in
FLAG 304 240 0
FLAG -1168 16 FB
FLAG -1232 -112 IFB
FLAG -1168 224 0
FLAG -1472 112 0
FLAG -1680 80 0
FLAG 960 -32 out_p
FLAG 1424 -96 out
FLAG -592 32 0
FLAG -592 368 0
FLAG -848 384 0
FLAG -288 160 0
FLAG -848 64 0
FLAG -96 48 FB2
FLAG -704 -720 0
FLAG -560 -352 0
FLAG -864 -464 0
FLAG -976 -400 0
FLAG 1488 368 swcont
FLAG 1488 480 0
FLAG 464 48 cap_p
FLAG 944 176 out_n
FLAG 1120 288 0
FLAG 832 -416 0
FLAG 352 -416 0
FLAG 560 -576 sig
FLAG -144 -432 0
FLAG 240 -448 0
FLAG -144 -592 contref
FLAG 832 -608 contac
SYMBOL bv -1680 -64 R0
SYMATTR InstName B1
SYMATTR Value V=-V(cap_p)
SYMBOL bv -1168 48 R0
SYMATTR InstName B2
SYMATTR Value V=5*tanh(V(IFB)*1000)
SYMBOL voltage -1280 -112 R90
WINDOW 0 70 58 Bottom 2
WINDOW 3 113 94 Top 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 10m 100k)
SYMBOL res -1488 -64 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL cap -1600 -96 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 336 -128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {Rlp}
SYMBOL bv 304 -96 M0
SYMATTR InstName B3
SYMATTR Value V=Vin*pi/4*(V(FB2)-0.5)*2
SYMBOL cap 480 160 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value {Cp}
SYMBOL ind2 448 -96 R0
SYMATTR InstName L1
SYMATTR Value {Lp}
SYMATTR Type ind
SYMBOL cap 688 -48 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {Cs}
SYMBOL ind2 656 16 M0
SYMATTR InstName L2
SYMATTR Value {Ls}
SYMATTR Type ind
SYMBOL res 912 -16 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value {Rls}
SYMBOL res 1472 112 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {Rss}
SYMBOL schottky 1136 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1136 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1264 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 1264 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1360 32 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL res -736 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 2k
SYMBOL cap -576 0 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL diode -640 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL res -736 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL cap -576 336 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 1n
SYMBOL diode -640 144 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL bv -848 240 R0
SYMATTR InstName B4
SYMATTR Value V=-V(FB)+5
SYMBOL Digital\\srflop -240 0 R0
WINDOW 3 0 0 Invisible 0
SYMATTR Value trise=0.01u tfall=0.01u
SYMATTR InstName A1
SYMBOL bv -848 -80 R0
SYMATTR InstName B5
SYMATTR Value V=V(FB)+5
SYMBOL bv -512 -96 M90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B6
SYMATTR Value V=V(cont)
SYMBOL bv -512 240 M90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B7
SYMATTR Value V=V(cont)
SYMBOL bv -1216 -624 M0
SYMATTR InstName B9
SYMATTR Value V=(Vout-V(out))*10
SYMBOL diode -544 -704 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode -544 -544 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value 1N4148
SYMBOL voltage -704 -848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 6
SYMBOL res -736 -640 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL voltage -560 -496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 1
SYMBOL res -1152 -640 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL cap -880 -528 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C8
SYMATTR Value 10n
SYMBOL cap -992 -464 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL res -992 -656 R0
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL voltage 1488 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PWL(0 -1 8m -1 8.1m 1)
SYMBOL voltage 1008 -608 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 5
SYMBOL SpecialFunctions/modulate 352 -608 R0
WINDOW 3 -30 122 Left 2
SYMATTR Value mark={10k} space={100}
SYMATTR InstName A2
SYMBOL bv 832 -560 M0
SYMATTR InstName B8
SYMATTR Value V=V(sig)/5
SYMBOL voltage -144 -576 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PWL(5m 0 205m 1)
SYMBOL bv 240 -592 M0
SYMATTR InstName B10
SYMATTR Value V=(10**(V(contref))-1)/9
TEXT 488 -120 Left 2 !k1 L1 L2 {k}
TEXT 1216 -200 Left 2 !.ic V(out_posi)=0
TEXT 1216 -168 Left 2 !.ic V(out_neg)=0
TEXT -592 528 Left 2 !.param fr=100k Rss=24 k=0.2 Vin=12*4/pi Vout=24 G=Vout*sqrt(2)/Vin Ls=Rss/(2*pi*fr)/sqrt(2*(1-sqrt(1-k**2))) Cs=1/(2*pi*fr)**2/Ls Lp=Ls*2*(1-sqrt(1-k**2))/k**2/G**2 Cp=1/(2*pi*fr)**2/Lp
TEXT -592 624 Left 2 !.tran 0 205m 5m
TEXT -592 592 Left 2 !.param Rlp=0.3 Rls=0.3
TEXT -592 560 Left 2 !.param Iout=Vout/Rss Iin=Iout*G
TEXT -664 672 Left 2 !.meas tran iin PARAM {Iin}
TEXT -664 704 Left 2 !.meas tran Rss PARAM {Rss}
TEXT -664 736 Left 2 !.meas tran Lp PARAM {Lp}
TEXT -664 768 Left 2 !.meas tran Ls PARAM {Ls}
